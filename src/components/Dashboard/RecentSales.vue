<template>
  <div class="card-body p-xl-40">
    <h6 class="fs-18 mb-35 text-title fw-semibold">Recent Sales</h6>
    <div class="table-responsive style-one">
      <table class="table text-nowrap align-middle mb-0">
        <thead>
          <tr>
            <th scope="col" class="text-title fw-normal fs-14 pt-0 ps-0">
              REFERENCE
            </th>
            <th scope="col" class="text-title fw-normal fs-14 pt-0">
              CUSTOMER
            </th>
            <th scope="col" class="text-title fw-normal fs-14 pt-0">STATUS</th>
            <th scope="col" class="text-title fw-normal fs-14 pt-0">
              GRAND TOTAL
            </th>
            <th scope="col" class="text-title fw-normal fs-14 pt-0">PAID</th>
            <th scope="col" class="text-title fw-normal fs-14 pt-0">DUE</th>
            <th scope="col" class="text-title fw-normal fs-14 pt-0 pe-0">
              PAYMENT STATUS
            </th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="shadow-none fw-normal text-black title ps-0">
              <router-link
                to="/sales-report"
                class="text-light-purple text-decoration-underline fs-14 fw-semibold"
              >
                87305928
              </router-link>
            </td>
            <td class="shadow-none lh-1 fs-14 fw-normal text-paragraph">
              Jhon Doe
            </td>
            <td class="shadow-none lh-1 fs-14 fw-normal text-paragraph">
              <span class="badge badge-success fs-14 fw-normal">Completed</span>
            </td>
            <td class="shadow-none lh-1 fs-14 fw-normal text-paragraph">
              $1200.00
            </td>
            <td class="shadow-none lh-1 fs-14 fw-normal text-paragraph">
              $1200.00
            </td>
            <td class="shadow-none lh-1 fs-14 fw-normal text-paragraph">
              $00.00
            </td>
            <td class="shadow-none lh-1 fs-14 fw-normal text-paragraph">
              <span class="badge badge-outline-green style-two fs-14 fw-medium">
                Paid
              </span>
            </td>
          </tr>
          <tr>
            <td class="shadow-none fw-normal text-black title ps-0">
              <router-link
                to="/sales-report"
                class="text-light-purple text-decoration-underline fs-14 fw-semibold"
              >
                87305929
              </router-link>
            </td>
            <td class="shadow-none lh-1 fs-14 fw-normal text-paragraph">
              Angela Carter
            </td>
            <td class="shadow-none lh-1 fs-14 fw-normal text-paragraph">
              <span class="badge badge-danger fs-14 fw-normal">Incomplete</span>
            </td>
            <td class="shadow-none lh-1 fs-14 fw-normal text-paragraph">
              $1450.00
            </td>
            <td class="shadow-none lh-1 fs-14 fw-normal text-paragraph">
              $1000.00
            </td>
            <td class="shadow-none lh-1 fs-14 fw-normal text-paragraph">
              $450.00
            </td>
            <td class="shadow-none lh-1 fs-14 fw-normal text-paragraph">
              <span
                class="badge badge-outline-red style-two fs-14 fw-normal fw-medium"
              >
                Due
              </span>
            </td>
          </tr>
          <tr>
            <td class="shadow-none fw-normal text-black title ps-0">
              <router-link
                to="/sales-report"
                class="text-light-purple text-decoration-underline fs-14 fw-semibold"
              >
                87305927
              </router-link>
            </td>
            <td class="shadow-none lh-1 fs-14 fw-normal text-paragraph">
              Victor James
            </td>
            <td class="shadow-none lh-1 fs-14 fw-normal text-paragraph">
              <span class="badge badge-success fs-14 fw-normal">Completed</span>
            </td>
            <td class="shadow-none lh-1 fs-14 fw-normal text-paragraph">
              $1200.00
            </td>
            <td class="shadow-none lh-1 fs-14 fw-normal text-paragraph">
              $1200.00
            </td>
            <td class="shadow-none lh-1 fs-14 fw-normal text-paragraph">
              $00.00
            </td>
            <td class="shadow-none lh-1 fs-14 fw-normal text-paragraph">
              <span
                class="badge badge-outline-green style-two fs-14 fw-normal fw-medium"
              >
                Paid
              </span>
            </td>
          </tr>
          <tr>
            <td class="shadow-none fw-normal text-black title ps-0">
              <router-link
                to="/sales-report"
                class="text-light-purple text-decoration-underline fs-14 fw-semibold"
              >
                87305926
              </router-link>
            </td>
            <td class="shadow-none lh-1 fs-14 fw-normal text-paragraph">
              Anda Smith
            </td>
            <td class="shadow-none lh-1 fs-14 fw-normal text-paragraph">
              <span class="badge badge-success fs-14 fw-normal">Completed</span>
            </td>
            <td class="shadow-none lh-1 fs-14 fw-normal text-paragraph">
              $1200.00
            </td>
            <td class="shadow-none lh-1 fs-14 fw-normal text-paragraph">
              $1200.00
            </td>
            <td class="shadow-none lh-1 fs-14 fw-normal text-paragraph">
              $00.00
            </td>
            <td class="shadow-none lh-1 fs-14 fw-normal text-paragraph">
              <span
                class="badge badge-outline-green style-two fs-14 fw-normal fw-medium"
              >
                Paid
              </span>
            </td>
          </tr>
          <tr>
            <td class="shadow-none fw-normal text-black title ps-0">
              <router-link
                to="/sales-report"
                class="text-light-purple text-decoration-underline fs-14 fw-semibold"
              >
                87305915
              </router-link>
            </td>
            <td class="shadow-none lh-1 fs-14 fw-normal text-paragraph">
              Jennifer Lora
            </td>
            <td class="shadow-none lh-1 fs-14 fw-normal text-paragraph">
              <span class="badge badge-success fs-14 fw-normal">Completed</span>
            </td>
            <td class="shadow-none lh-1 fs-14 fw-normal text-paragraph">
              $1200.00
            </td>
            <td class="shadow-none lh-1 fs-14 fw-normal text-paragraph">
              $1200.00
            </td>
            <td class="shadow-none lh-1 fs-14 fw-normal text-paragraph">
              $00.00
            </td>
            <td class="shadow-none lh-1 fs-14 fw-normal text-paragraph">
              <span
                class="badge badge-outline-green style-two fs-14 fw-normal fw-medium"
              >
                Paid
              </span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</template>


<script lang="ts">

import { ref, computed, onMounted, defineComponent } from 'vue';

import axios from "axios";

import { formatDate, BASE_URL } from '@/utils/utils';

export default defineComponent({
  name: "PurchaseList",
  data() {
    return {
      currncySymbol:"â‚¹"
    };
  },
  setup() {
    const loading = ref(false);
    const searchTerm = ref('');
    const purchaseListData = ref([
    ]);

    // Function to fetch products using Axios
    const fetchPurchageOrders = async () => {
      try {
        loading.value = true; // Set loading to true before request
        const response = await axios.get(`${BASE_URL}/freezy/dashboard/stockAlerts`);
        purchaseListData.value = response.data; // Assuming  your API returns an array of products

      } catch (error) {
        console.error("Error fetching products:", error);
      } finally {
        loading.value = false; // Set loading to false after request
      }
    };

    // Call fetchProducts when the component is mounted
    onMounted(() => {
      fetchPurchageOrders();
    });

    return {
      searchTerm,
      purchaseListData
    };
  },
  methods: {
    formatDate,
    getUserName(user: any) {
      return user.first_name + " " + user.last_name;
    },
    getProjectName(project: any) {
      return project.name;
    },
    onViewPurchase(purchaseItem: any) {
    //  stateStore.purchaseDetails = purchaseItem;
    }
  },
});

</script>